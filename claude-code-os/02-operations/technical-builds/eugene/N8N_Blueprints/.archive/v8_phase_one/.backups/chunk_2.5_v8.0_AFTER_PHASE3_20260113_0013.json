[
  {
    "type": "text",
    "text": "{\n  \"success\": true,\n  \"data\": {\n    \"updatedAt\": \"2026-01-12T23:13:06.960Z\",\n    \"createdAt\": \"2026-01-08T21:33:22.263Z\",\n    \"id\": \"okg8wTqLtPUwjQ18\",\n    \"name\": \"Chunk 2.5 - Client Document Tracking (Eugene Document Organizer)\",\n    \"description\": null,\n    \"active\": true,\n    \"isArchived\": false,\n    \"nodes\": [\n      {\n        \"parameters\": {\n          \"inputSource\": \"passthrough\"\n        },\n        \"id\": \"trigger-1\",\n        \"name\": \"Execute Workflow Trigger (Refreshed)\",\n        \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n        \"typeVersion\": 1.1,\n        \"position\": [\n          240,\n          320\n        ]\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"// Build Tier 1 Classification Prompt\\n// Classify document into 1 of 4 broad categories\\n\\nconst filename = $input.first().json.filename;\\nconst clientEmail = $input.first().json.clientEmail;\\n\\n// Tier 1 Prompt: Classify into 4 broad categories\\nconst tier1Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTASK: Classify this document into ONE of 4 broad categories based on the filename.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nCATEGORIES:\\n\\n1. OBJEKTUNTERLAGEN (Property/Object Documents)\\n   Keywords: Projekt, Beschreibung, Expose, Grundbuch, Kaufvertrag, Bau, Lageplan, Zeichnungen, Genehmigung, DIN276, DIN277, Werkvertrag, Flaeche\\n   Examples: Project descriptions, land register, purchase agreements, building permits, construction drawings, calculations\\n\\n2. WIRTSCHAFTLICHE_UNTERLAGEN (Financial/Economic Documents)\\n   Keywords: Verkauf, Preis, Bauzeitenplan, Liquiditaet, Vertrieb, Ausstattung, Teilung, Versicherung, Umsatzsteuer, BWA, Jahresabschluss, Finanzierung, Darlehen\\n   Examples: Sales prices, construction schedules, insurance, VAT returns, financial statements, loan agreements\\n\\n3. RECHTLICHE_UNTERLAGEN (Legal/Compliance Documents)\\n   Keywords: Gesellschaft, Vertrag, Handelsregister, Gewerbe, Steuer, ID, Freistellung, Vollmacht\\n   Examples: Partnership agreements, commercial register, business registration, tax ID, powers of attorney\\n\\n4. SONSTIGES (Miscellaneous)\\n   Keywords: Gutachter, Korrespondenz, Sonstiges, Others\\n   Examples: Expert assignments, correspondence, general miscellaneous\\n\\nINSTRUCTIONS:\\n1. Analyze the filename for German keywords\\n2. Match to the most appropriate category\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning in 1-2 sentences\\n\\nRESPONSE FORMAT (JSON only, no markdown):\\n{\\n  \\\"tier1Category\\\": \\\"OBJEKTUNTERLAGEN | WIRTSCHAFTLICHE_UNTERLAGEN | RECHTLICHE_UNTERLAGEN | SONSTIGES\\\",\\n  \\\"tier1Confidence\\\": 85,\\n  \\\"reasoning\\\": \\\"Brief explanation of why this category was chosen\\\"\\n}\\n\\nSTRICT RULES:\\n- Response must be valid JSON only\\n- tier1Confidence must be 0-100 number\\n- tier1Category must be exactly one of the 4 options above\\n- No markdown formatting\\n- No code blocks\\n- No explanatory text outside JSON`;\\n\\nreturn {\\n  json: {\\n    tier1Prompt,\\n    filename,\\n    clientEmail,\\n    // Pass through all input data\\n    ...($input.first().json)\\n  }\\n};\"\n        },\n        \"id\": \"code-1\",\n        \"name\": \"Build AI Classification Prompt\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          464,\n          320\n        ]\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"// Parse Tier 1 Classification Result + Build Dynamic Tier 2 Prompt\\n\\nconst response = $input.first().json;\\n\\n// Extract Tier 1 classification from GPT-4 response\\nlet tier1Result;\\ntry {\\n  // GPT-4 response is in response.choices[0].message.content\\n  const content = response.choices[0].message.content;\\n  tier1Result = JSON.parse(content);\\n} catch (error) {\\n  // If parsing fails, return error for LOW_CONFIDENCE routing\\n  return {\\n    json: {\\n      error: 'Failed to parse Tier 1 classification',\\n      tier1Category: 'UNKNOWN',\\n      tier1Confidence: 0,\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nconst { tier1Category, tier1Confidence, reasoning } = tier1Result;\\n\\n// THRESHOLD CHECK: Tier 1 confidence must be >= 60%\\nif (tier1Confidence < 60) {\\n  return {\\n    json: {\\n      tier1Category,\\n      tier1Confidence,\\n      tier1Reasoning: reasoning,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier1',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\n// Build category-specific Tier 2 prompt\\nconst filename = $input.first().json.filename;\\nconst clientEmail = $input.first().json.clientEmail;\\n\\nlet tier2Prompt = '';\\n\\n// === OBJEKTUNTERLAGEN (14 types) ===\\nif (tier1Category === 'OBJEKTUNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as OBJEKTUNTERLAGEN (Property/Object Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n01_Projektbeschreibung (Exposé/Project Description) ⭐ CORE\\n   Keywords: Projekt, Beschreibung, Expose, Overview, Proposal\\n   Description: Project overview, property description, investment proposal\\n\\n02_Kaufvertrag (Purchase Agreement)\\n   Keywords: Kauf, Vertrag, Purchase, Agreement\\n   Description: Property purchase contract\\n\\n03_Grundbuchauszug (Land Register Extract) ⭐ CORE\\n   Keywords: Grundbuch, Land, Register, Auszug\\n   Description: Official land registry extract\\n\\n04_Eintragungsbewilligungen (Entry Permits)\\n   Keywords: Eintragung, Bewilligung, Entry, Permit\\n   Description: Permits for land register entries\\n\\n05_Bodenrichtwert (Land Value)\\n   Keywords: Boden, Richtwert, Land, Value\\n   Description: Official land value assessment\\n\\n06_Baulastenverzeichnis (Building Encumbrance Register)\\n   Keywords: Baulast, Verzeichnis, Encumbrance\\n   Description: Register of building encumbrances\\n\\n07_Altlastenkataster (Contaminated Sites Register)\\n   Keywords: Altlast, Kataster, Contaminated\\n   Description: Register of contaminated sites\\n\\n08_Baugrundgutachten (Soil Survey)\\n   Keywords: Baugrund, Gutachten, Soil, Survey\\n   Description: Soil conditions assessment\\n\\n09_Lageplan (Site Plan)\\n   Keywords: Lage, Plan, Site\\n   Description: Site location plan\\n\\n10_Bautraegerkalkulation_DIN276 (Developer Calculation) ⭐ CORE\\n   Keywords: Bautraeger, Kalkulation, DIN276, Calculation\\n   Description: Developer cost calculation per DIN276 standard\\n\\n15_Flaechenberechnung_DIN277 (Area Calculation DIN277)\\n   Keywords: Flaeche, Berechnung, DIN277, Area\\n   Description: Area calculation per DIN277 standard\\n\\n16_GU_Werkvertraege (General Contractor Agreements)\\n   Keywords: GU, Werkvertrag, Contractor, Agreement\\n   Description: General contractor work agreements\\n\\n17_Bauzeichnungen (Construction Drawings)\\n   Keywords: Bau, Zeichnung, Construction, Drawing\\n   Description: Construction and architectural drawings\\n\\n18_Baugenehmigung (Building Permit)\\n   Keywords: Bau, Genehmigung, Building, Permit\\n   Description: Official building permit\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"01_Projektbeschreibung\\\",\\n  \\\"tier2Confidence\\\": 88,\\n  \\\"germanName\\\": \\\"Projektbeschreibung\\\",\\n  \\\"englishName\\\": \\\"Exposé/Project Description\\\",\\n  \\\"isCoreType\\\": true,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above (e.g., \\\"01_Projektbeschreibung\\\")\\n- isCoreType: true for ⭐ CORE types, false for others\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === WIRTSCHAFTLICHE_UNTERLAGEN (12 types) ===\\nelse if (tier1Category === 'WIRTSCHAFTLICHE_UNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as WIRTSCHAFTLICHE_UNTERLAGEN (Financial/Economic Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n11_Verkaufspreise (Sales Prices)\\n   Keywords: Verkauf, Preis, Sales, Price\\n   Description: Sales price lists and calculations\\n\\n12_Bauzeitenplan_Liquiditaet (Construction Schedule & Liquidity)\\n   Keywords: Bauzeit, Plan, Liquiditaet, Schedule\\n   Description: Construction timeline and liquidity planning\\n\\n13_Vertriebsweg (Distribution Channel)\\n   Keywords: Vertrieb, Weg, Distribution, Channel\\n   Description: Sales and distribution strategy\\n\\n14_Bau_Ausstattungsbeschreibung (Construction & Equipment Description)\\n   Keywords: Bau, Ausstattung, Beschreibung, Equipment\\n   Description: Construction specifications and equipment details\\n\\n19_Teilungserklaerung (Declaration of Division)\\n   Keywords: Teilung, Erklaerung, Division, Declaration\\n   Description: Property division declaration\\n\\n20_Versicherungen (Insurance)\\n   Keywords: Versicherung, Insurance\\n   Description: Insurance policies and documentation\\n\\n21_Muster_Verkaufsvertrag (Sample Sales Contract)\\n   Keywords: Muster, Verkauf, Vertrag, Sample, Sales\\n   Description: Template sales contract\\n\\n23_Umsatzsteuervoranmeldung (VAT Advance Return)\\n   Keywords: Umsatz, Steuer, Voranmeldung, VAT\\n   Description: VAT advance return filings\\n\\n24_BWA (Business Evaluation)\\n   Keywords: BWA, Business, Evaluation\\n   Description: Business evaluation report\\n\\n25_Jahresabschluss (Annual Financial Statement)\\n   Keywords: Jahres, Abschluss, Annual, Financial\\n   Description: Annual financial statement\\n\\n26_Finanzierungsbestaetigung (Financing Confirmation)\\n   Keywords: Finanzierung, Bestaetigung, Financing, Confirmation\\n   Description: Financing approval or confirmation\\n\\n27_Darlehensvertrag (Loan Agreement)\\n   Keywords: Darlehen, Vertrag, Loan, Agreement\\n   Description: Loan contract\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"11_Verkaufspreise\\\",\\n  \\\"tier2Confidence\\\": 92,\\n  \\\"germanName\\\": \\\"Verkaufspreise\\\",\\n  \\\"englishName\\\": \\\"Sales Prices\\\",\\n  \\\"isCoreType\\\": false,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: false for all WIRTSCHAFTLICHE types (none are CORE)\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === RECHTLICHE_UNTERLAGEN (6 types) ===\\nelse if (tier1Category === 'RECHTLICHE_UNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as RECHTLICHE_UNTERLAGEN (Legal/Compliance Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n28_Gesellschaftsvertrag (Partnership Agreement)\\n   Keywords: Gesellschaft, Vertrag, Partnership, Agreement\\n   Description: Company partnership or shareholder agreement\\n\\n29_Handelsregisterauszug (Commercial Register Extract)\\n   Keywords: Handelsregister, Auszug, Commercial, Register\\n   Description: Commercial register extract\\n\\n30_Gewerbeanmeldung (Business Registration)\\n   Keywords: Gewerbe, Anmeldung, Business, Registration\\n   Description: Business registration documentation\\n\\n31_Steuer_ID (Tax ID)\\n   Keywords: Steuer, ID, Tax\\n   Description: Tax identification number\\n\\n32_Freistellungsbescheinigung (Exemption Certificate)\\n   Keywords: Freistellung, Bescheinigung, Exemption, Certificate\\n   Description: Tax exemption certificate\\n\\n33_Vollmachten (Powers of Attorney)\\n   Keywords: Vollmacht, Power, Attorney\\n   Description: Power of attorney documents\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"28_Gesellschaftsvertrag\\\",\\n  \\\"tier2Confidence\\\": 85,\\n  \\\"germanName\\\": \\\"Gesellschaftsvertrag\\\",\\n  \\\"englishName\\\": \\\"Partnership Agreement\\\",\\n  \\\"isCoreType\\\": false,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: false for all RECHTLICHE types (none are CORE)\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === SONSTIGES (6 types) ===\\nelse if (tier1Category === 'SONSTIGES') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as SONSTIGES (Miscellaneous) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n22_Gutachterauftrag (Expert Assignment)\\n   Keywords: Gutachter, Auftrag, Expert, Assignment\\n   Description: Expert assessment assignment\\n\\n34_Korrespondenz (Correspondence)\\n   Keywords: Korrespondenz, Email, Brief, Letter, Correspondence\\n   Description: Email correspondence and letters\\n\\n35_Sonstiges_Allgemein (General Miscellaneous)\\n   Keywords: Sonstiges, Misc, General\\n   Description: General miscellaneous documents\\n\\n36_Exit_Strategie (Exit Strategy) ⭐ CORE\\n   Keywords: Exit, Strategie, Strategy\\n   Description: Investment exit strategy\\n\\n37_Others (Others)\\n   Keywords: Other, Andere\\n   Description: Other unclassified documents\\n\\n38_Unknowns (Unknowns)\\n   Keywords: Unknown, Unbekannt\\n   Description: Unknown document type\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n5. Use 38_Unknowns ONLY if truly unclear\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"36_Exit_Strategie\\\",\\n  \\\"tier2Confidence\\\": 95,\\n  \\\"germanName\\\": \\\"Exit Strategie\\\",\\n  \\\"englishName\\\": \\\"Exit Strategy\\\",\\n  \\\"isCoreType\\\": true,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: true ONLY for 36_Exit_Strategie\\n- Valid JSON only, no markdown`;\\n}\\n\\n// Unknown category fallback\\nelse {\\n  return {\\n    json: {\\n      error: 'Unknown Tier 1 category',\\n      tier1Category,\\n      tier1Confidence,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier1_unknown_category',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nreturn {\\n  json: {\\n    tier1Category,\\n    tier1Confidence,\\n    tier1Reasoning: reasoning,\\n    tier2Prompt,\\n    ...($input.first().json)\\n  }\\n};\"\n        },\n        \"id\": \"code-2\",\n        \"name\": \"Parse Classification Result\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          1040,\n          320\n        ]\n      },\n      {\n        \"parameters\": {\n          \"documentId\": {\n            \"mode\": \"id\",\n            \"value\": \"12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I\"\n          },\n          \"sheetName\": {\n            \"mode\": \"name\",\n            \"value\": \"Client_Tracker\"\n          },\n          \"options\": {}\n        },\n        \"id\": \"sheets-1\",\n        \"name\": \"Lookup Client in Client_Tracker\",\n        \"type\": \"n8n-nodes-base.googleSheets\",\n        \"typeVersion\": 4.7,\n        \"position\": [\n          1264,\n          320\n        ],\n        \"credentials\": {\n          \"googleSheetsOAuth2Api\": {\n            \"id\": \"H7ewI1sOrDYabelt\",\n            \"name\": \"Google Sheets account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const trackerData = $('Lookup Client in Client_Tracker').all();\\nconst mainData = $('Parse Classification Result').first().json;\\n\\nconst clientNormalized = mainData.clientNormalized || '';\\nconst documentType = mainData.documentType || '';\\nconst confidence = mainData.documentClassificationConfidence || 0;\\n\\n// Check if confidence is too low\\nif (confidence < 70) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_unclear_type',\\n      errorMessage: `Low confidence (${confidence}%) - document type unclear`\\n    }\\n  };\\n}\\n\\n// Check if any data was returned\\nif (!trackerData || trackerData.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: 'No data returned from Client_Tracker lookup'\\n    }\\n  };\\n}\\n\\n// Google Sheets lookup returns matching rows (no header in result)\\n// If we got results, the first row is the client data\\nconst clientRow = trackerData[0];\\n\\n// Validate that we have a Client_Name field\\nif (!clientRow.json.Client_Name) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: 'Client_Tracker returned invalid data (no Client_Name field)'\\n    }\\n  };\\n}\\n\\n// Verify this is the correct client by comparing normalized names\\nconst sheetClientName = clientRow.json.Client_Name || '';\\nconst normalizedSheetName = sheetClientName\\n  .toLowerCase()\\n  .trim()\\n  .replace(/ä/g, 'ae')\\n  .replace(/ö/g, 'oe')\\n  .replace(/ü/g, 'ue')\\n  .replace(/ß/g, 'ss')\\n  .replace(/\\\\s*(gmbh|ag|kg|e\\\\.v\\\\.|mbh|co\\\\.|&\\\\s*co\\\\.?)\\\\s*/gi, '')\\n  .replace(/[^a-z0-9]/g, '_')\\n  .replace(/_+/g, '_')\\n  .replace(/^_|_$/g, '');\\n\\nif (normalizedSheetName !== clientNormalized) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: `Client name mismatch: expected \\\"${clientNormalized}\\\", got \\\"${normalizedSheetName}\\\"`\\n    }\\n  };\\n}\\n\\n// Client found and validated - prepare for update\\nreturn {\\n  json: {\\n    ...mainData,\\n    trackerRowIndex: 0, // First row in lookup result\\n    trackerClientName: clientRow.json.Client_Name,\\n    chunk2_5_status: 'success'\\n  }\\n};\"\n        },\n        \"id\": \"code-3\",\n        \"name\": \"Find Client Row and Validate\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          1488,\n          320\n        ]\n      },\n      {\n        \"parameters\": {\n          \"conditions\": {\n            \"options\": {\n              \"version\": 2,\n              \"leftValue\": \"\",\n              \"caseSensitive\": true,\n              \"typeValidation\": \"strict\"\n            },\n            \"conditions\": [\n              {\n                \"leftValue\": \"={{ $json.chunk2_5_status }}\",\n                \"rightValue\": \"success\",\n                \"operator\": {\n                  \"type\": \"string\",\n                  \"operation\": \"equals\",\n                  \"singleValue\": true\n                }\n              }\n            ],\n            \"combinator\": \"and\"\n          },\n          \"options\": {}\n        },\n        \"id\": \"if-1\",\n        \"name\": \"Check Status\",\n        \"type\": \"n8n-nodes-base.if\",\n        \"typeVersion\": 2,\n        \"position\": [\n          1712,\n          320\n        ]\n      },\n      {\n        \"parameters\": {\n          \"documentId\": {\n            \"__rl\": true,\n            \"value\": \"12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I\",\n            \"mode\": \"list\",\n            \"cachedResultName\": \"AMA Client Document Tracker\",\n            \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I/edit?usp=drivesdk\"\n          },\n          \"sheetName\": {\n            \"__rl\": true,\n            \"value\": 1217593734,\n            \"mode\": \"list\",\n            \"cachedResultName\": \"Client_Tracker\",\n            \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I/edit#gid=1217593734\"\n          },\n          \"options\": {}\n        },\n        \"id\": \"sheets-2\",\n        \"name\": \"Update Client_Tracker Row\",\n        \"type\": \"n8n-nodes-base.googleSheets\",\n        \"typeVersion\": 4.7,\n        \"position\": [\n          2160,\n          224\n        ],\n        \"credentials\": {\n          \"googleSheetsOAuth2Api\": {\n            \"id\": \"H7ewI1sOrDYabelt\",\n            \"name\": \"Google Sheets account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"documentId\": {\n            \"mode\": \"id\",\n            \"value\": \"1-CPnCr3locAORVX5tUEoh6r0i-x3tQ_ROTN0VXatOAU\"\n          },\n          \"sheetName\": {\n            \"mode\": \"name\",\n            \"value\": \"Sheet1\"\n          },\n          \"options\": {}\n        },\n        \"id\": \"sheets-3\",\n        \"name\": \"Lookup Client in AMA_Folder_IDs\",\n        \"type\": \"n8n-nodes-base.googleSheets\",\n        \"typeVersion\": 4.7,\n        \"position\": [\n          2384,\n          224\n        ],\n        \"credentials\": {\n          \"googleSheetsOAuth2Api\": {\n            \"id\": \"H7ewI1sOrDYabelt\",\n            \"name\": \"Google Sheets account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const folderData = $input.all();\\nconst mainData = $('Find Client Row and Validate').first().json;\\n\\nconst clientNormalized = mainData.clientNormalized || '';\\nconst documentType = mainData.documentType || '';\\n\\n// Skip header row\\nconst dataRows = folderData.slice(1);\\n\\nif (dataRows.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: 'AMA_Folder_IDs sheet is empty'\\n    }\\n  };\\n}\\n\\n// Find client row\\nconst clientRow = dataRows.find(row => {\\n  const sheetClientName = row.json.Client_Name || '';\\n  const normalizedSheetName = sheetClientName\\n    .toLowerCase()\\n    .trim()\\n    .replace(/ä/g, 'ae')\\n    .replace(/ö/g, 'oe')\\n    .replace(/ü/g, 'ue')\\n    .replace(/ß/g, 'ss')\\n    .replace(/\\\\s*(gmbh|ag|kg|e\\\\.v\\\\.|mbh|co\\\\.|&\\\\s*co\\\\.?)\\\\s*/gi, '')\\n    .replace(/[^a-z0-9]/g, '_')\\n    .replace(/_+/g, '_')\\n    .replace(/^_|_$/g, '');\\n  \\n  return normalizedSheetName === clientNormalized;\\n});\\n\\nif (!clientRow) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Client \\\"${clientNormalized}\\\" not found in AMA_Folder_IDs`\\n    }\\n  };\\n}\\n\\n// Map document type to column name\\nconst columnMap = {\\n  'Exposé': '01_Expose',\\n  'Grundbuch': '02_Grundbuch',\\n  'Calculation': '03_Calculation',\\n  'Exit_Strategy': '04_Exit_Strategy',\\n  'Other': '37_Others'\\n};\\n\\nconst columnName = columnMap[documentType];\\nif (!columnName) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Unknown document type: ${documentType}`\\n    }\\n  };\\n}\\n\\nconst destinationFolderId = clientRow.json[columnName];\\nif (!destinationFolderId) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Folder ID not found for ${documentType} in AMA_Folder_IDs`\\n    }\\n  };\\n}\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    finalFolderId: destinationFolderId,\\n    chunk2_5_status: 'success'\\n  }\\n};\"\n        },\n        \"id\": \"code-4\",\n        \"name\": \"Get Destination Folder ID\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          2608,\n          224\n        ]\n      },\n      {\n        \"parameters\": {\n          \"operation\": \"move\",\n          \"fileId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"={{ $json.fileId }}\"\n          },\n          \"driveId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"My Drive\"\n          },\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"={{ $json.finalFolderId }}\"\n          }\n        },\n        \"id\": \"drive-1\",\n        \"name\": \"Move File to Final Location\",\n        \"type\": \"n8n-nodes-base.googleDrive\",\n        \"typeVersion\": 3,\n        \"position\": [\n          2832,\n          224\n        ],\n        \"credentials\": {\n          \"googleDriveOAuth2Api\": {\n            \"id\": \"a4m50EefR3DJoU0R\",\n            \"name\": \"Google Drive account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const mainData = $('Get Destination Folder ID').first().json;\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    trackerUpdated: true,\\n    chunk2_5_status: 'success',\\n    processedAt: new Date().toISOString()\\n  }\\n};\"\n        },\n        \"id\": \"code-5\",\n        \"name\": \"Prepare Success Output\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          3056,\n          224\n        ]\n      },\n      {\n        \"parameters\": {\n          \"documentId\": {\n            \"mode\": \"id\",\n            \"value\": \"1-CPnCr3locAORVX5tUEoh6r0i-x3tQ_ROTN0VXatOAU\"\n          },\n          \"sheetName\": {\n            \"mode\": \"name\",\n            \"value\": \"Sheet1\"\n          },\n          \"options\": {}\n        },\n        \"id\": \"sheets-4\",\n        \"name\": \"Lookup 38_Unknowns Folder\",\n        \"type\": \"n8n-nodes-base.googleSheets\",\n        \"typeVersion\": 4.7,\n        \"position\": [\n          1936,\n          416\n        ],\n        \"credentials\": {\n          \"googleSheetsOAuth2Api\": {\n            \"id\": \"H7ewI1sOrDYabelt\",\n            \"name\": \"Google Sheets account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const folderData = $input.all();\\nconst mainData = $('Find Client Row and Validate').first().json;\\n\\n// Skip header row\\nconst dataRows = folderData.slice(1);\\n\\nif (dataRows.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      unknownsFolderId: null,\\n      errorMessage: 'Could not find 38_Unknowns folder - AMA_Folder_IDs is empty'\\n    }\\n  };\\n}\\n\\n// Look for row with \\\"38_Unknowns\\\" in any column\\nlet unknownsFolderId = null;\\nfor (const row of dataRows) {\\n  const rowData = row.json;\\n  for (const key in rowData) {\\n    if (key.includes('38_Unknowns')) {\\n      unknownsFolderId = rowData[key];\\n      break;\\n    }\\n  }\\n  if (unknownsFolderId) break;\\n}\\n\\nif (!unknownsFolderId) {\\n  // Try to get from first row (assuming it might be a global folder)\\n  unknownsFolderId = dataRows[0].json['38_Unknowns'] || null;\\n}\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    unknownsFolderId: unknownsFolderId,\\n    errorFallbackUsed: !unknownsFolderId\\n  }\\n};\"\n        },\n        \"id\": \"code-6\",\n        \"name\": \"Get 38_Unknowns Folder ID\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          2160,\n          416\n        ]\n      },\n      {\n        \"parameters\": {\n          \"operation\": \"move\",\n          \"fileId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"={{ $json.fileId }}\"\n          },\n          \"driveId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"My Drive\"\n          },\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"={{ $json.unknownsFolderId }}\"\n          }\n        },\n        \"id\": \"drive-2\",\n        \"name\": \"Move File to 38_Unknowns\",\n        \"type\": \"n8n-nodes-base.googleDrive\",\n        \"typeVersion\": 3,\n        \"position\": [\n          2384,\n          416\n        ],\n        \"credentials\": {\n          \"googleDriveOAuth2Api\": {\n            \"id\": \"a4m50EefR3DJoU0R\",\n            \"name\": \"Google Drive account\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const mainData = $input.first().json;\\n\\nconst clientName = mainData.clientNormalized || 'Unknown';\\nconst fileName = mainData.fileName || 'Unknown';\\nconst fileId = mainData.fileId || '';\\nconst errorStatus = mainData.chunk2_5_status || 'unknown_error';\\nconst errorMessage = mainData.errorMessage || 'No error details provided';\\nconst documentType = mainData.documentType || 'Unknown';\\nconst confidence = mainData.documentClassificationConfidence || 0;\\n\\nlet issueDescription = '';\\nif (errorStatus === 'error_client_not_found') {\\n  issueDescription = `Client \\\"${clientName}\\\" was not found in the Client_Tracker sheet.`;\\n} else if (errorStatus === 'error_unclear_type') {\\n  issueDescription = `Document type classification had low confidence (${confidence}%). Classified as: ${documentType}.`;\\n} else if (errorStatus === 'error_folder_not_found') {\\n  issueDescription = `Destination folder for document type \\\"${documentType}\\\" was not found in AMA_Folder_IDs.`;\\n} else {\\n  issueDescription = errorMessage;\\n}\\n\\nconst fileLink = `https://drive.google.com/file/d/${fileId}/view`;\\n\\nconst emailSubject = `Eugene: Document Classification Issue - ${clientName}`;\\nconst emailBody = `<html>\\n<body>\\n<h2>Document Classification Issue</h2>\\n<p>A document could not be automatically classified and has been moved to the 38_Unknowns folder.</p>\\n\\n<h3>Details:</h3>\\n<ul>\\n  <li><strong>Client:</strong> ${clientName}</li>\\n  <li><strong>Filename:</strong> ${fileName}</li>\\n  <li><strong>Issue:</strong> ${issueDescription}</li>\\n  <li><strong>Classified Type:</strong> ${documentType} (${confidence}% confidence)</li>\\n  <li><strong>Error Status:</strong> ${errorStatus}</li>\\n</ul>\\n\\n<h3>File Location:</h3>\\n<p><a href=\\\"${fileLink}\\\">View file in Google Drive</a></p>\\n\\n<p>Please review this document and manually classify it.</p>\\n</body>\\n</html>`;\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    emailSubject: emailSubject,\\n    emailBody: emailBody,\\n    trackerUpdated: false,\\n    chunk2_5_status: errorStatus,\\n    processedAt: new Date().toISOString()\\n  }\\n};\"\n        },\n        \"id\": \"code-7\",\n        \"name\": \"Prepare Error Email Body\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          2608,\n          416\n        ]\n      },\n      {\n        \"parameters\": {\n          \"sendTo\": \"={{ $json.emailRecipient || 'sway@oloxa.ai' }}\",\n          \"subject\": \"={{ $json.emailSubject }}\",\n          \"message\": \"={{ $json.emailBody }}\",\n          \"options\": {}\n        },\n        \"id\": \"gmail-1\",\n        \"name\": \"Send Error Notification Email\",\n        \"type\": \"n8n-nodes-base.gmail\",\n        \"typeVersion\": 2.1,\n        \"position\": [\n          2832,\n          416\n        ],\n        \"webhookId\": \"d50e78b4-8ae0-4171-b62f-c2afdafc7e58\",\n        \"credentials\": {\n          \"gmailOAuth2\": {\n            \"id\": \"gmailOAuth2\",\n            \"name\": \"Gmail OAuth2\"\n          }\n        }\n      },\n      {\n        \"parameters\": {\n          \"jsCode\": \"const mainData = $input.first().json;\\n\\nconst documentType = mainData.documentType || '';\\nconst clientName = mainData.trackerClientName || mainData.clientNormalized || '';\\n\\n// Map document types to Status column names\\nconst statusColumnMap = {\\n  'Exposé': 'Status_Expose',\\n  'Grundbuch': 'Status_Grundbuch',\\n  'Calculation': 'Status_Calculation',\\n  'Exit_Strategy': 'Status_Exit_Strategy'\\n};\\n\\nconst statusColumn = statusColumnMap[documentType];\\n\\n// Build row data matching Client_Tracker structure\\nconst rowData = {\\n  Client_Name: clientName,\\n  Last_Updated: new Date().toISOString()\\n};\\n\\n// Only set status checkmark for tracked document types\\nif (statusColumn) {\\n  rowData[statusColumn] = '✓';\\n}\\n\\n// Note: 'Other' documents go to 37_Others folder but are not tracked in Status columns\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    ...rowData\\n  }\\n};\"\n        },\n        \"id\": \"code-8\",\n        \"name\": \"Prepare Tracker Update Data\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          1936,\n          224\n        ]\n      },\n      {\n        \"parameters\": {\n          \"method\": \"POST\",\n          \"url\": \"https://api.openai.com/v1/chat/completions\",\n          \"authentication\": \"predefinedCredentialType\",\n          \"nodeCredentialType\": \"openAiApi\",\n          \"sendBody\": true,\n          \"bodyParameters\": {\n            \"parameters\": [\n              {\n                \"name\": \"model\",\n                \"value\": \"gpt-4-turbo\"\n              },\n              {\n                \"name\": \"messages\",\n                \"value\": \"={{ [{\\\"role\\\": \\\"user\\\", \\\"content\\\": $json.classificationPrompt}] }}\"\n              },\n              {\n                \"name\": \"response_format\",\n                \"value\": \"={{ {\\\"type\\\": \\\"json_object\\\"} }}\"\n              }\n            ]\n          },\n          \"options\": {}\n        },\n        \"id\": \"http-openai-1\",\n        \"name\": \"Classify Document with GPT-4\",\n        \"type\": \"n8n-nodes-base.httpRequest\",\n        \"typeVersion\": 4.2,\n        \"position\": [\n          688,\n          320\n        ],\n        \"credentials\": {\n          \"openAiApi\": {\n            \"id\": \"xmJ7t6kaKgMwA1ce\",\n            \"name\": \"OpenAi account\"\n          }\n        }\n      },\n      {\n        \"id\": \"3732e080-c0d3-4763-957d-d4d90761ddd8\",\n        \"name\": \"Tier 2 GPT-4 API Call\",\n        \"type\": \"n8n-nodes-base.httpRequest\",\n        \"typeVersion\": 4.2,\n        \"position\": [\n          1264,\n          320\n        ],\n        \"parameters\": {\n          \"method\": \"POST\",\n          \"url\": \"https://api.openai.com/v1/chat/completions\",\n          \"authentication\": \"predefinedCredentialType\",\n          \"nodeCredentialType\": \"openAiApi\",\n          \"sendBody\": true,\n          \"specifyBody\": \"json\",\n          \"jsonBody\": \"={\\n  \\\"model\\\": \\\"gpt-4\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": {{ $json.tier2Prompt }}\\n    }\\n  ],\\n  \\\"temperature\\\": 0.3,\\n  \\\"max_tokens\\\": 300\\n}\",\n          \"options\": {}\n        }\n      },\n      {\n        \"id\": \"86d8d160-de91-464d-92d0-7db05b7c3f4f\",\n        \"name\": \"Parse Tier 2 Result\",\n        \"type\": \"n8n-nodes-base.code\",\n        \"typeVersion\": 2,\n        \"position\": [\n          1488,\n          320\n        ],\n        \"parameters\": {\n          \"jsCode\": \"// Parse Tier 2 Classification Result\\n\\nconst response = $input.first().json;\\n\\n// Extract Tier 2 classification from GPT-4 response\\nlet tier2Result;\\ntry {\\n  const content = response.choices[0].message.content;\\n  tier2Result = JSON.parse(content);\\n} catch (error) {\\n  // Parsing failed - route to LOW_CONFIDENCE\\n  return {\\n    json: {\\n      error: 'Failed to parse Tier 2 classification',\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier2_parse_error',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nconst {\\n  documentType,\\n  tier2Confidence,\\n  germanName,\\n  englishName,\\n  isCoreType,\\n  reasoning: tier2Reasoning\\n} = tier2Result;\\n\\n// THRESHOLD CHECK: Tier 2 confidence must be >= 70%\\nif (tier2Confidence < 70) {\\n  return {\\n    json: {\\n      documentType,\\n      tier2Confidence,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier2',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\n// Calculate combined confidence\\nconst tier1Confidence = $input.first().json.tier1Confidence;\\nconst combinedConfidence = Math.round((tier1Confidence + tier2Confidence) / 2);\\n\\nreturn {\\n  json: {\\n    // Classification results\\n    documentType,\\n    tier2Confidence,\\n    combinedConfidence,\\n    germanName,\\n    englishName,\\n    isCoreType,\\n    tier2Reasoning,\\n    // Pass through Tier 1 data\\n    tier1Category: $input.first().json.tier1Category,\\n    tier1Confidence: $input.first().json.tier1Confidence,\\n    tier1Reasoning: $input.first().json.tier1Reasoning,\\n    // Pass through original data\\n    ...($input.first().json)\\n  }\\n};\"\n        }\n      }\n    ],\n    \"connections\": {\n      \"Execute Workflow Trigger (Refreshed)\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Build AI Classification Prompt\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Parse Classification Result\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Tier 2 GPT-4 API Call\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Lookup Client in Client_Tracker\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Find Client Row and Validate\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Find Client Row and Validate\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Check Status\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Check Status\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Lookup 38_Unknowns Folder\",\n              \"type\": \"main\",\n              \"index\": 0\n            },\n            {\n              \"node\": \"Prepare Tracker Update Data\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Update Client_Tracker Row\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Lookup Client in AMA_Folder_IDs\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Lookup Client in AMA_Folder_IDs\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Get Destination Folder ID\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Get Destination Folder ID\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Move File to Final Location\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Move File to Final Location\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Prepare Success Output\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Lookup 38_Unknowns Folder\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Get 38_Unknowns Folder ID\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Get 38_Unknowns Folder ID\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Move File to 38_Unknowns\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Move File to 38_Unknowns\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Prepare Error Email Body\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Prepare Error Email Body\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Send Error Notification Email\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Prepare Tracker Update Data\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Update Client_Tracker Row\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Build AI Classification Prompt\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Classify Document with GPT-4\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Classify Document with GPT-4\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Parse Classification Result\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Tier 2 GPT-4 API Call\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Parse Tier 2 Result\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      },\n      \"Parse Tier 2 Result\": {\n        \"main\": [\n          [\n            {\n              \"node\": \"Lookup Client in Client_Tracker\",\n              \"type\": \"main\",\n              \"index\": 0\n            }\n          ]\n        ]\n      }\n    },\n    \"settings\": {\n      \"executionOrder\": \"v1\",\n      \"callerPolicy\": \"workflowsFromSameOwner\",\n      \"availableInMCP\": false\n    },\n    \"staticData\": null,\n    \"meta\": null,\n    \"pinData\": {},\n    \"versionId\": \"7e4e2fa3-2285-4b63-ba78-4b828f1f577c\",\n    \"activeVersionId\": \"7e4e2fa3-2285-4b63-ba78-4b828f1f577c\",\n    \"versionCounter\": 169,\n    \"triggerCount\": 0,\n    \"shared\": [\n      {\n        \"updatedAt\": \"2026-01-08T21:33:22.263Z\",\n        \"createdAt\": \"2026-01-08T21:33:22.263Z\",\n        \"role\": \"workflow:owner\",\n        \"workflowId\": \"okg8wTqLtPUwjQ18\",\n        \"projectId\": \"Rs8mhw052fnrzWZM\",\n        \"project\": {\n          \"updatedAt\": \"2025-12-31T15:54:29.115Z\",\n          \"createdAt\": \"2025-12-31T15:27:33.865Z\",\n          \"id\": \"Rs8mhw052fnrzWZM\",\n          \"name\": \"Sway Clarke <sway@oloxa.ai>\",\n          \"type\": \"personal\",\n          \"icon\": null,\n          \"description\": null,\n          \"creatorId\": \"e9bd9112-c2e3-4f67-873a-e1001baeafd8\",\n          \"projectRelations\": [\n            {\n              \"updatedAt\": \"2025-12-31T15:27:33.865Z\",\n              \"createdAt\": \"2025-12-31T15:27:33.865Z\",\n              \"userId\": \"e9bd9112-c2e3-4f67-873a-e1001baeafd8\",\n              \"projectId\": \"Rs8mhw052fnrzWZM\",\n              \"user\": {\n                \"updatedAt\": \"2026-01-12T23:08:16.904Z\",\n                \"createdAt\": \"2025-12-31T15:27:33.119Z\",\n                \"id\": \"e9bd9112-c2e3-4f67-873a-e1001baeafd8\",\n                \"email\": \"sway@oloxa.ai\",\n                \"firstName\": \"Sway\",\n                \"lastName\": \"Clarke\",\n                \"personalizationAnswers\": {\n                  \"version\": \"v4\",\n                  \"personalization_survey_submitted_at\": \"2025-12-31T15:54:37.562Z\",\n                  \"personalization_survey_n8n_version\": \"2.1.4\"\n                },\n                \"settings\": {\n                  \"userActivated\": true,\n                  \"easyAIWorkflowOnboarded\": true,\n                  \"firstSuccessfulWorkflowId\": \"zbxHkXOoD1qaz6OS\",\n                  \"userActivatedAt\": 1767398053308,\n                  \"npsSurvey\": {\n                    \"responded\": true,\n                    \"lastShownAt\": 1767684846804\n                  }\n                },\n                \"disabled\": false,\n                \"mfaEnabled\": false,\n                \"lastActiveAt\": \"2026-01-12\",\n                \"isPending\": false\n              }\n            }\n          ]\n        }\n      }\n    ],\n    \"tags\": [],\n    \"activeVersion\": {\n      \"updatedAt\": \"2026-01-12T23:13:06.962Z\",\n      \"createdAt\": \"2026-01-12T23:13:06.962Z\",\n      \"versionId\": \"7e4e2fa3-2285-4b63-ba78-4b828f1f577c\",\n      \"workflowId\": \"okg8wTqLtPUwjQ18\",\n      \"nodes\": [\n        {\n          \"parameters\": {\n            \"inputSource\": \"passthrough\"\n          },\n          \"id\": \"trigger-1\",\n          \"name\": \"Execute Workflow Trigger (Refreshed)\",\n          \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n          \"typeVersion\": 1.1,\n          \"position\": [\n            240,\n            320\n          ]\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"// Build Tier 1 Classification Prompt\\n// Classify document into 1 of 4 broad categories\\n\\nconst filename = $input.first().json.filename;\\nconst clientEmail = $input.first().json.clientEmail;\\n\\n// Tier 1 Prompt: Classify into 4 broad categories\\nconst tier1Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTASK: Classify this document into ONE of 4 broad categories based on the filename.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nCATEGORIES:\\n\\n1. OBJEKTUNTERLAGEN (Property/Object Documents)\\n   Keywords: Projekt, Beschreibung, Expose, Grundbuch, Kaufvertrag, Bau, Lageplan, Zeichnungen, Genehmigung, DIN276, DIN277, Werkvertrag, Flaeche\\n   Examples: Project descriptions, land register, purchase agreements, building permits, construction drawings, calculations\\n\\n2. WIRTSCHAFTLICHE_UNTERLAGEN (Financial/Economic Documents)\\n   Keywords: Verkauf, Preis, Bauzeitenplan, Liquiditaet, Vertrieb, Ausstattung, Teilung, Versicherung, Umsatzsteuer, BWA, Jahresabschluss, Finanzierung, Darlehen\\n   Examples: Sales prices, construction schedules, insurance, VAT returns, financial statements, loan agreements\\n\\n3. RECHTLICHE_UNTERLAGEN (Legal/Compliance Documents)\\n   Keywords: Gesellschaft, Vertrag, Handelsregister, Gewerbe, Steuer, ID, Freistellung, Vollmacht\\n   Examples: Partnership agreements, commercial register, business registration, tax ID, powers of attorney\\n\\n4. SONSTIGES (Miscellaneous)\\n   Keywords: Gutachter, Korrespondenz, Sonstiges, Others\\n   Examples: Expert assignments, correspondence, general miscellaneous\\n\\nINSTRUCTIONS:\\n1. Analyze the filename for German keywords\\n2. Match to the most appropriate category\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning in 1-2 sentences\\n\\nRESPONSE FORMAT (JSON only, no markdown):\\n{\\n  \\\"tier1Category\\\": \\\"OBJEKTUNTERLAGEN | WIRTSCHAFTLICHE_UNTERLAGEN | RECHTLICHE_UNTERLAGEN | SONSTIGES\\\",\\n  \\\"tier1Confidence\\\": 85,\\n  \\\"reasoning\\\": \\\"Brief explanation of why this category was chosen\\\"\\n}\\n\\nSTRICT RULES:\\n- Response must be valid JSON only\\n- tier1Confidence must be 0-100 number\\n- tier1Category must be exactly one of the 4 options above\\n- No markdown formatting\\n- No code blocks\\n- No explanatory text outside JSON`;\\n\\nreturn {\\n  json: {\\n    tier1Prompt,\\n    filename,\\n    clientEmail,\\n    // Pass through all input data\\n    ...($input.first().json)\\n  }\\n};\"\n          },\n          \"id\": \"code-1\",\n          \"name\": \"Build AI Classification Prompt\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            464,\n            320\n          ]\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"// Parse Tier 1 Classification Result + Build Dynamic Tier 2 Prompt\\n\\nconst response = $input.first().json;\\n\\n// Extract Tier 1 classification from GPT-4 response\\nlet tier1Result;\\ntry {\\n  // GPT-4 response is in response.choices[0].message.content\\n  const content = response.choices[0].message.content;\\n  tier1Result = JSON.parse(content);\\n} catch (error) {\\n  // If parsing fails, return error for LOW_CONFIDENCE routing\\n  return {\\n    json: {\\n      error: 'Failed to parse Tier 1 classification',\\n      tier1Category: 'UNKNOWN',\\n      tier1Confidence: 0,\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nconst { tier1Category, tier1Confidence, reasoning } = tier1Result;\\n\\n// THRESHOLD CHECK: Tier 1 confidence must be >= 60%\\nif (tier1Confidence < 60) {\\n  return {\\n    json: {\\n      tier1Category,\\n      tier1Confidence,\\n      tier1Reasoning: reasoning,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier1',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\n// Build category-specific Tier 2 prompt\\nconst filename = $input.first().json.filename;\\nconst clientEmail = $input.first().json.clientEmail;\\n\\nlet tier2Prompt = '';\\n\\n// === OBJEKTUNTERLAGEN (14 types) ===\\nif (tier1Category === 'OBJEKTUNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as OBJEKTUNTERLAGEN (Property/Object Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n01_Projektbeschreibung (Exposé/Project Description) ⭐ CORE\\n   Keywords: Projekt, Beschreibung, Expose, Overview, Proposal\\n   Description: Project overview, property description, investment proposal\\n\\n02_Kaufvertrag (Purchase Agreement)\\n   Keywords: Kauf, Vertrag, Purchase, Agreement\\n   Description: Property purchase contract\\n\\n03_Grundbuchauszug (Land Register Extract) ⭐ CORE\\n   Keywords: Grundbuch, Land, Register, Auszug\\n   Description: Official land registry extract\\n\\n04_Eintragungsbewilligungen (Entry Permits)\\n   Keywords: Eintragung, Bewilligung, Entry, Permit\\n   Description: Permits for land register entries\\n\\n05_Bodenrichtwert (Land Value)\\n   Keywords: Boden, Richtwert, Land, Value\\n   Description: Official land value assessment\\n\\n06_Baulastenverzeichnis (Building Encumbrance Register)\\n   Keywords: Baulast, Verzeichnis, Encumbrance\\n   Description: Register of building encumbrances\\n\\n07_Altlastenkataster (Contaminated Sites Register)\\n   Keywords: Altlast, Kataster, Contaminated\\n   Description: Register of contaminated sites\\n\\n08_Baugrundgutachten (Soil Survey)\\n   Keywords: Baugrund, Gutachten, Soil, Survey\\n   Description: Soil conditions assessment\\n\\n09_Lageplan (Site Plan)\\n   Keywords: Lage, Plan, Site\\n   Description: Site location plan\\n\\n10_Bautraegerkalkulation_DIN276 (Developer Calculation) ⭐ CORE\\n   Keywords: Bautraeger, Kalkulation, DIN276, Calculation\\n   Description: Developer cost calculation per DIN276 standard\\n\\n15_Flaechenberechnung_DIN277 (Area Calculation DIN277)\\n   Keywords: Flaeche, Berechnung, DIN277, Area\\n   Description: Area calculation per DIN277 standard\\n\\n16_GU_Werkvertraege (General Contractor Agreements)\\n   Keywords: GU, Werkvertrag, Contractor, Agreement\\n   Description: General contractor work agreements\\n\\n17_Bauzeichnungen (Construction Drawings)\\n   Keywords: Bau, Zeichnung, Construction, Drawing\\n   Description: Construction and architectural drawings\\n\\n18_Baugenehmigung (Building Permit)\\n   Keywords: Bau, Genehmigung, Building, Permit\\n   Description: Official building permit\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"01_Projektbeschreibung\\\",\\n  \\\"tier2Confidence\\\": 88,\\n  \\\"germanName\\\": \\\"Projektbeschreibung\\\",\\n  \\\"englishName\\\": \\\"Exposé/Project Description\\\",\\n  \\\"isCoreType\\\": true,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above (e.g., \\\"01_Projektbeschreibung\\\")\\n- isCoreType: true for ⭐ CORE types, false for others\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === WIRTSCHAFTLICHE_UNTERLAGEN (12 types) ===\\nelse if (tier1Category === 'WIRTSCHAFTLICHE_UNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as WIRTSCHAFTLICHE_UNTERLAGEN (Financial/Economic Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n11_Verkaufspreise (Sales Prices)\\n   Keywords: Verkauf, Preis, Sales, Price\\n   Description: Sales price lists and calculations\\n\\n12_Bauzeitenplan_Liquiditaet (Construction Schedule & Liquidity)\\n   Keywords: Bauzeit, Plan, Liquiditaet, Schedule\\n   Description: Construction timeline and liquidity planning\\n\\n13_Vertriebsweg (Distribution Channel)\\n   Keywords: Vertrieb, Weg, Distribution, Channel\\n   Description: Sales and distribution strategy\\n\\n14_Bau_Ausstattungsbeschreibung (Construction & Equipment Description)\\n   Keywords: Bau, Ausstattung, Beschreibung, Equipment\\n   Description: Construction specifications and equipment details\\n\\n19_Teilungserklaerung (Declaration of Division)\\n   Keywords: Teilung, Erklaerung, Division, Declaration\\n   Description: Property division declaration\\n\\n20_Versicherungen (Insurance)\\n   Keywords: Versicherung, Insurance\\n   Description: Insurance policies and documentation\\n\\n21_Muster_Verkaufsvertrag (Sample Sales Contract)\\n   Keywords: Muster, Verkauf, Vertrag, Sample, Sales\\n   Description: Template sales contract\\n\\n23_Umsatzsteuervoranmeldung (VAT Advance Return)\\n   Keywords: Umsatz, Steuer, Voranmeldung, VAT\\n   Description: VAT advance return filings\\n\\n24_BWA (Business Evaluation)\\n   Keywords: BWA, Business, Evaluation\\n   Description: Business evaluation report\\n\\n25_Jahresabschluss (Annual Financial Statement)\\n   Keywords: Jahres, Abschluss, Annual, Financial\\n   Description: Annual financial statement\\n\\n26_Finanzierungsbestaetigung (Financing Confirmation)\\n   Keywords: Finanzierung, Bestaetigung, Financing, Confirmation\\n   Description: Financing approval or confirmation\\n\\n27_Darlehensvertrag (Loan Agreement)\\n   Keywords: Darlehen, Vertrag, Loan, Agreement\\n   Description: Loan contract\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"11_Verkaufspreise\\\",\\n  \\\"tier2Confidence\\\": 92,\\n  \\\"germanName\\\": \\\"Verkaufspreise\\\",\\n  \\\"englishName\\\": \\\"Sales Prices\\\",\\n  \\\"isCoreType\\\": false,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: false for all WIRTSCHAFTLICHE types (none are CORE)\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === RECHTLICHE_UNTERLAGEN (6 types) ===\\nelse if (tier1Category === 'RECHTLICHE_UNTERLAGEN') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as RECHTLICHE_UNTERLAGEN (Legal/Compliance Documents) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n28_Gesellschaftsvertrag (Partnership Agreement)\\n   Keywords: Gesellschaft, Vertrag, Partnership, Agreement\\n   Description: Company partnership or shareholder agreement\\n\\n29_Handelsregisterauszug (Commercial Register Extract)\\n   Keywords: Handelsregister, Auszug, Commercial, Register\\n   Description: Commercial register extract\\n\\n30_Gewerbeanmeldung (Business Registration)\\n   Keywords: Gewerbe, Anmeldung, Business, Registration\\n   Description: Business registration documentation\\n\\n31_Steuer_ID (Tax ID)\\n   Keywords: Steuer, ID, Tax\\n   Description: Tax identification number\\n\\n32_Freistellungsbescheinigung (Exemption Certificate)\\n   Keywords: Freistellung, Bescheinigung, Exemption, Certificate\\n   Description: Tax exemption certificate\\n\\n33_Vollmachten (Powers of Attorney)\\n   Keywords: Vollmacht, Power, Attorney\\n   Description: Power of attorney documents\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"28_Gesellschaftsvertrag\\\",\\n  \\\"tier2Confidence\\\": 85,\\n  \\\"germanName\\\": \\\"Gesellschaftsvertrag\\\",\\n  \\\"englishName\\\": \\\"Partnership Agreement\\\",\\n  \\\"isCoreType\\\": false,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: false for all RECHTLICHE types (none are CORE)\\n- Valid JSON only, no markdown`;\\n}\\n\\n// === SONSTIGES (6 types) ===\\nelse if (tier1Category === 'SONSTIGES') {\\n  tier2Prompt = `You are a German real estate document classifier for AMA Capital.\\n\\nTIER 1 RESULT: This document was classified as SONSTIGES (Miscellaneous) with ${tier1Confidence}% confidence.\\n\\nTASK: Now classify into the SPECIFIC document type from the list below.\\n\\nFILENAME: ${filename}\\nCLIENT: ${clientEmail}\\n\\nSPECIFIC TYPES (choose ONE):\\n\\n22_Gutachterauftrag (Expert Assignment)\\n   Keywords: Gutachter, Auftrag, Expert, Assignment\\n   Description: Expert assessment assignment\\n\\n34_Korrespondenz (Correspondence)\\n   Keywords: Korrespondenz, Email, Brief, Letter, Correspondence\\n   Description: Email correspondence and letters\\n\\n35_Sonstiges_Allgemein (General Miscellaneous)\\n   Keywords: Sonstiges, Misc, General\\n   Description: General miscellaneous documents\\n\\n36_Exit_Strategie (Exit Strategy) ⭐ CORE\\n   Keywords: Exit, Strategie, Strategy\\n   Description: Investment exit strategy\\n\\n37_Others (Others)\\n   Keywords: Other, Andere\\n   Description: Other unclassified documents\\n\\n38_Unknowns (Unknowns)\\n   Keywords: Unknown, Unbekannt\\n   Description: Unknown document type\\n\\nINSTRUCTIONS:\\n1. Analyze filename for specific German keywords\\n2. Choose the MOST SPECIFIC type that matches\\n3. Provide confidence score (0-100)\\n4. Explain your reasoning\\n5. Use 38_Unknowns ONLY if truly unclear\\n\\nRESPONSE FORMAT (JSON only):\\n{\\n  \\\"documentType\\\": \\\"36_Exit_Strategie\\\",\\n  \\\"tier2Confidence\\\": 95,\\n  \\\"germanName\\\": \\\"Exit Strategie\\\",\\n  \\\"englishName\\\": \\\"Exit Strategy\\\",\\n  \\\"isCoreType\\\": true,\\n  \\\"reasoning\\\": \\\"Brief explanation\\\"\\n}\\n\\nSTRICT RULES:\\n- documentType must EXACTLY match one of the codes above\\n- isCoreType: true ONLY for 36_Exit_Strategie\\n- Valid JSON only, no markdown`;\\n}\\n\\n// Unknown category fallback\\nelse {\\n  return {\\n    json: {\\n      error: 'Unknown Tier 1 category',\\n      tier1Category,\\n      tier1Confidence,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier1_unknown_category',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nreturn {\\n  json: {\\n    tier1Category,\\n    tier1Confidence,\\n    tier1Reasoning: reasoning,\\n    tier2Prompt,\\n    ...($input.first().json)\\n  }\\n};\"\n          },\n          \"id\": \"code-2\",\n          \"name\": \"Parse Classification Result\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            1040,\n            320\n          ]\n        },\n        {\n          \"parameters\": {\n            \"documentId\": {\n              \"mode\": \"id\",\n              \"value\": \"12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I\"\n            },\n            \"sheetName\": {\n              \"mode\": \"name\",\n              \"value\": \"Client_Tracker\"\n            },\n            \"options\": {}\n          },\n          \"id\": \"sheets-1\",\n          \"name\": \"Lookup Client in Client_Tracker\",\n          \"type\": \"n8n-nodes-base.googleSheets\",\n          \"typeVersion\": 4.7,\n          \"position\": [\n            1264,\n            320\n          ],\n          \"credentials\": {\n            \"googleSheetsOAuth2Api\": {\n              \"id\": \"H7ewI1sOrDYabelt\",\n              \"name\": \"Google Sheets account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const trackerData = $('Lookup Client in Client_Tracker').all();\\nconst mainData = $('Parse Classification Result').first().json;\\n\\nconst clientNormalized = mainData.clientNormalized || '';\\nconst documentType = mainData.documentType || '';\\nconst confidence = mainData.documentClassificationConfidence || 0;\\n\\n// Check if confidence is too low\\nif (confidence < 70) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_unclear_type',\\n      errorMessage: `Low confidence (${confidence}%) - document type unclear`\\n    }\\n  };\\n}\\n\\n// Check if any data was returned\\nif (!trackerData || trackerData.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: 'No data returned from Client_Tracker lookup'\\n    }\\n  };\\n}\\n\\n// Google Sheets lookup returns matching rows (no header in result)\\n// If we got results, the first row is the client data\\nconst clientRow = trackerData[0];\\n\\n// Validate that we have a Client_Name field\\nif (!clientRow.json.Client_Name) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: 'Client_Tracker returned invalid data (no Client_Name field)'\\n    }\\n  };\\n}\\n\\n// Verify this is the correct client by comparing normalized names\\nconst sheetClientName = clientRow.json.Client_Name || '';\\nconst normalizedSheetName = sheetClientName\\n  .toLowerCase()\\n  .trim()\\n  .replace(/ä/g, 'ae')\\n  .replace(/ö/g, 'oe')\\n  .replace(/ü/g, 'ue')\\n  .replace(/ß/g, 'ss')\\n  .replace(/\\\\s*(gmbh|ag|kg|e\\\\.v\\\\.|mbh|co\\\\.|&\\\\s*co\\\\.?)\\\\s*/gi, '')\\n  .replace(/[^a-z0-9]/g, '_')\\n  .replace(/_+/g, '_')\\n  .replace(/^_|_$/g, '');\\n\\nif (normalizedSheetName !== clientNormalized) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_client_not_found',\\n      errorMessage: `Client name mismatch: expected \\\"${clientNormalized}\\\", got \\\"${normalizedSheetName}\\\"`\\n    }\\n  };\\n}\\n\\n// Client found and validated - prepare for update\\nreturn {\\n  json: {\\n    ...mainData,\\n    trackerRowIndex: 0, // First row in lookup result\\n    trackerClientName: clientRow.json.Client_Name,\\n    chunk2_5_status: 'success'\\n  }\\n};\"\n          },\n          \"id\": \"code-3\",\n          \"name\": \"Find Client Row and Validate\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            1488,\n            320\n          ]\n        },\n        {\n          \"parameters\": {\n            \"conditions\": {\n              \"options\": {\n                \"version\": 2,\n                \"leftValue\": \"\",\n                \"caseSensitive\": true,\n                \"typeValidation\": \"strict\"\n              },\n              \"conditions\": [\n                {\n                  \"leftValue\": \"={{ $json.chunk2_5_status }}\",\n                  \"rightValue\": \"success\",\n                  \"operator\": {\n                    \"type\": \"string\",\n                    \"operation\": \"equals\",\n                    \"singleValue\": true\n                  }\n                }\n              ],\n              \"combinator\": \"and\"\n            },\n            \"options\": {}\n          },\n          \"id\": \"if-1\",\n          \"name\": \"Check Status\",\n          \"type\": \"n8n-nodes-base.if\",\n          \"typeVersion\": 2,\n          \"position\": [\n            1712,\n            320\n          ]\n        },\n        {\n          \"parameters\": {\n            \"documentId\": {\n              \"__rl\": true,\n              \"value\": \"12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I\",\n              \"mode\": \"list\",\n              \"cachedResultName\": \"AMA Client Document Tracker\",\n              \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I/edit?usp=drivesdk\"\n            },\n            \"sheetName\": {\n              \"__rl\": true,\n              \"value\": 1217593734,\n              \"mode\": \"list\",\n              \"cachedResultName\": \"Client_Tracker\",\n              \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/12N2C8iWeHkxJQ2qz7m3aTyZw3X1gXbyyyFa-rP0tD7I/edit#gid=1217593734\"\n            },\n            \"options\": {}\n          },\n          \"id\": \"sheets-2\",\n          \"name\": \"Update Client_Tracker Row\",\n          \"type\": \"n8n-nodes-base.googleSheets\",\n          \"typeVersion\": 4.7,\n          \"position\": [\n            2160,\n            224\n          ],\n          \"credentials\": {\n            \"googleSheetsOAuth2Api\": {\n              \"id\": \"H7ewI1sOrDYabelt\",\n              \"name\": \"Google Sheets account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"documentId\": {\n              \"mode\": \"id\",\n              \"value\": \"1-CPnCr3locAORVX5tUEoh6r0i-x3tQ_ROTN0VXatOAU\"\n            },\n            \"sheetName\": {\n              \"mode\": \"name\",\n              \"value\": \"Sheet1\"\n            },\n            \"options\": {}\n          },\n          \"id\": \"sheets-3\",\n          \"name\": \"Lookup Client in AMA_Folder_IDs\",\n          \"type\": \"n8n-nodes-base.googleSheets\",\n          \"typeVersion\": 4.7,\n          \"position\": [\n            2384,\n            224\n          ],\n          \"credentials\": {\n            \"googleSheetsOAuth2Api\": {\n              \"id\": \"H7ewI1sOrDYabelt\",\n              \"name\": \"Google Sheets account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const folderData = $input.all();\\nconst mainData = $('Find Client Row and Validate').first().json;\\n\\nconst clientNormalized = mainData.clientNormalized || '';\\nconst documentType = mainData.documentType || '';\\n\\n// Skip header row\\nconst dataRows = folderData.slice(1);\\n\\nif (dataRows.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: 'AMA_Folder_IDs sheet is empty'\\n    }\\n  };\\n}\\n\\n// Find client row\\nconst clientRow = dataRows.find(row => {\\n  const sheetClientName = row.json.Client_Name || '';\\n  const normalizedSheetName = sheetClientName\\n    .toLowerCase()\\n    .trim()\\n    .replace(/ä/g, 'ae')\\n    .replace(/ö/g, 'oe')\\n    .replace(/ü/g, 'ue')\\n    .replace(/ß/g, 'ss')\\n    .replace(/\\\\s*(gmbh|ag|kg|e\\\\.v\\\\.|mbh|co\\\\.|&\\\\s*co\\\\.?)\\\\s*/gi, '')\\n    .replace(/[^a-z0-9]/g, '_')\\n    .replace(/_+/g, '_')\\n    .replace(/^_|_$/g, '');\\n  \\n  return normalizedSheetName === clientNormalized;\\n});\\n\\nif (!clientRow) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Client \\\"${clientNormalized}\\\" not found in AMA_Folder_IDs`\\n    }\\n  };\\n}\\n\\n// Map document type to column name\\nconst columnMap = {\\n  'Exposé': '01_Expose',\\n  'Grundbuch': '02_Grundbuch',\\n  'Calculation': '03_Calculation',\\n  'Exit_Strategy': '04_Exit_Strategy',\\n  'Other': '37_Others'\\n};\\n\\nconst columnName = columnMap[documentType];\\nif (!columnName) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Unknown document type: ${documentType}`\\n    }\\n  };\\n}\\n\\nconst destinationFolderId = clientRow.json[columnName];\\nif (!destinationFolderId) {\\n  return {\\n    json: {\\n      ...mainData,\\n      chunk2_5_status: 'error_folder_not_found',\\n      errorMessage: `Folder ID not found for ${documentType} in AMA_Folder_IDs`\\n    }\\n  };\\n}\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    finalFolderId: destinationFolderId,\\n    chunk2_5_status: 'success'\\n  }\\n};\"\n          },\n          \"id\": \"code-4\",\n          \"name\": \"Get Destination Folder ID\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            2608,\n            224\n          ]\n        },\n        {\n          \"parameters\": {\n            \"operation\": \"move\",\n            \"fileId\": {\n              \"__rl\": true,\n              \"mode\": \"id\",\n              \"value\": \"={{ $json.fileId }}\"\n            },\n            \"driveId\": {\n              \"__rl\": true,\n              \"mode\": \"list\",\n              \"value\": \"My Drive\"\n            },\n            \"folderId\": {\n              \"__rl\": true,\n              \"mode\": \"id\",\n              \"value\": \"={{ $json.finalFolderId }}\"\n            }\n          },\n          \"id\": \"drive-1\",\n          \"name\": \"Move File to Final Location\",\n          \"type\": \"n8n-nodes-base.googleDrive\",\n          \"typeVersion\": 3,\n          \"position\": [\n            2832,\n            224\n          ],\n          \"credentials\": {\n            \"googleDriveOAuth2Api\": {\n              \"id\": \"a4m50EefR3DJoU0R\",\n              \"name\": \"Google Drive account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const mainData = $('Get Destination Folder ID').first().json;\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    trackerUpdated: true,\\n    chunk2_5_status: 'success',\\n    processedAt: new Date().toISOString()\\n  }\\n};\"\n          },\n          \"id\": \"code-5\",\n          \"name\": \"Prepare Success Output\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            3056,\n            224\n          ]\n        },\n        {\n          \"parameters\": {\n            \"documentId\": {\n              \"mode\": \"id\",\n              \"value\": \"1-CPnCr3locAORVX5tUEoh6r0i-x3tQ_ROTN0VXatOAU\"\n            },\n            \"sheetName\": {\n              \"mode\": \"name\",\n              \"value\": \"Sheet1\"\n            },\n            \"options\": {}\n          },\n          \"id\": \"sheets-4\",\n          \"name\": \"Lookup 38_Unknowns Folder\",\n          \"type\": \"n8n-nodes-base.googleSheets\",\n          \"typeVersion\": 4.7,\n          \"position\": [\n            1936,\n            416\n          ],\n          \"credentials\": {\n            \"googleSheetsOAuth2Api\": {\n              \"id\": \"H7ewI1sOrDYabelt\",\n              \"name\": \"Google Sheets account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const folderData = $input.all();\\nconst mainData = $('Find Client Row and Validate').first().json;\\n\\n// Skip header row\\nconst dataRows = folderData.slice(1);\\n\\nif (dataRows.length === 0) {\\n  return {\\n    json: {\\n      ...mainData,\\n      unknownsFolderId: null,\\n      errorMessage: 'Could not find 38_Unknowns folder - AMA_Folder_IDs is empty'\\n    }\\n  };\\n}\\n\\n// Look for row with \\\"38_Unknowns\\\" in any column\\nlet unknownsFolderId = null;\\nfor (const row of dataRows) {\\n  const rowData = row.json;\\n  for (const key in rowData) {\\n    if (key.includes('38_Unknowns')) {\\n      unknownsFolderId = rowData[key];\\n      break;\\n    }\\n  }\\n  if (unknownsFolderId) break;\\n}\\n\\nif (!unknownsFolderId) {\\n  // Try to get from first row (assuming it might be a global folder)\\n  unknownsFolderId = dataRows[0].json['38_Unknowns'] || null;\\n}\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    unknownsFolderId: unknownsFolderId,\\n    errorFallbackUsed: !unknownsFolderId\\n  }\\n};\"\n          },\n          \"id\": \"code-6\",\n          \"name\": \"Get 38_Unknowns Folder ID\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            2160,\n            416\n          ]\n        },\n        {\n          \"parameters\": {\n            \"operation\": \"move\",\n            \"fileId\": {\n              \"__rl\": true,\n              \"mode\": \"id\",\n              \"value\": \"={{ $json.fileId }}\"\n            },\n            \"driveId\": {\n              \"__rl\": true,\n              \"mode\": \"list\",\n              \"value\": \"My Drive\"\n            },\n            \"folderId\": {\n              \"__rl\": true,\n              \"mode\": \"id\",\n              \"value\": \"={{ $json.unknownsFolderId }}\"\n            }\n          },\n          \"id\": \"drive-2\",\n          \"name\": \"Move File to 38_Unknowns\",\n          \"type\": \"n8n-nodes-base.googleDrive\",\n          \"typeVersion\": 3,\n          \"position\": [\n            2384,\n            416\n          ],\n          \"credentials\": {\n            \"googleDriveOAuth2Api\": {\n              \"id\": \"a4m50EefR3DJoU0R\",\n              \"name\": \"Google Drive account\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const mainData = $input.first().json;\\n\\nconst clientName = mainData.clientNormalized || 'Unknown';\\nconst fileName = mainData.fileName || 'Unknown';\\nconst fileId = mainData.fileId || '';\\nconst errorStatus = mainData.chunk2_5_status || 'unknown_error';\\nconst errorMessage = mainData.errorMessage || 'No error details provided';\\nconst documentType = mainData.documentType || 'Unknown';\\nconst confidence = mainData.documentClassificationConfidence || 0;\\n\\nlet issueDescription = '';\\nif (errorStatus === 'error_client_not_found') {\\n  issueDescription = `Client \\\"${clientName}\\\" was not found in the Client_Tracker sheet.`;\\n} else if (errorStatus === 'error_unclear_type') {\\n  issueDescription = `Document type classification had low confidence (${confidence}%). Classified as: ${documentType}.`;\\n} else if (errorStatus === 'error_folder_not_found') {\\n  issueDescription = `Destination folder for document type \\\"${documentType}\\\" was not found in AMA_Folder_IDs.`;\\n} else {\\n  issueDescription = errorMessage;\\n}\\n\\nconst fileLink = `https://drive.google.com/file/d/${fileId}/view`;\\n\\nconst emailSubject = `Eugene: Document Classification Issue - ${clientName}`;\\nconst emailBody = `<html>\\n<body>\\n<h2>Document Classification Issue</h2>\\n<p>A document could not be automatically classified and has been moved to the 38_Unknowns folder.</p>\\n\\n<h3>Details:</h3>\\n<ul>\\n  <li><strong>Client:</strong> ${clientName}</li>\\n  <li><strong>Filename:</strong> ${fileName}</li>\\n  <li><strong>Issue:</strong> ${issueDescription}</li>\\n  <li><strong>Classified Type:</strong> ${documentType} (${confidence}% confidence)</li>\\n  <li><strong>Error Status:</strong> ${errorStatus}</li>\\n</ul>\\n\\n<h3>File Location:</h3>\\n<p><a href=\\\"${fileLink}\\\">View file in Google Drive</a></p>\\n\\n<p>Please review this document and manually classify it.</p>\\n</body>\\n</html>`;\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    emailSubject: emailSubject,\\n    emailBody: emailBody,\\n    trackerUpdated: false,\\n    chunk2_5_status: errorStatus,\\n    processedAt: new Date().toISOString()\\n  }\\n};\"\n          },\n          \"id\": \"code-7\",\n          \"name\": \"Prepare Error Email Body\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            2608,\n            416\n          ]\n        },\n        {\n          \"parameters\": {\n            \"sendTo\": \"={{ $json.emailRecipient || 'sway@oloxa.ai' }}\",\n            \"subject\": \"={{ $json.emailSubject }}\",\n            \"message\": \"={{ $json.emailBody }}\",\n            \"options\": {}\n          },\n          \"id\": \"gmail-1\",\n          \"name\": \"Send Error Notification Email\",\n          \"type\": \"n8n-nodes-base.gmail\",\n          \"typeVersion\": 2.1,\n          \"position\": [\n            2832,\n            416\n          ],\n          \"webhookId\": \"d50e78b4-8ae0-4171-b62f-c2afdafc7e58\",\n          \"credentials\": {\n            \"gmailOAuth2\": {\n              \"id\": \"gmailOAuth2\",\n              \"name\": \"Gmail OAuth2\"\n            }\n          }\n        },\n        {\n          \"parameters\": {\n            \"jsCode\": \"const mainData = $input.first().json;\\n\\nconst documentType = mainData.documentType || '';\\nconst clientName = mainData.trackerClientName || mainData.clientNormalized || '';\\n\\n// Map document types to Status column names\\nconst statusColumnMap = {\\n  'Exposé': 'Status_Expose',\\n  'Grundbuch': 'Status_Grundbuch',\\n  'Calculation': 'Status_Calculation',\\n  'Exit_Strategy': 'Status_Exit_Strategy'\\n};\\n\\nconst statusColumn = statusColumnMap[documentType];\\n\\n// Build row data matching Client_Tracker structure\\nconst rowData = {\\n  Client_Name: clientName,\\n  Last_Updated: new Date().toISOString()\\n};\\n\\n// Only set status checkmark for tracked document types\\nif (statusColumn) {\\n  rowData[statusColumn] = '✓';\\n}\\n\\n// Note: 'Other' documents go to 37_Others folder but are not tracked in Status columns\\n\\nreturn {\\n  json: {\\n    ...mainData,\\n    ...rowData\\n  }\\n};\"\n          },\n          \"id\": \"code-8\",\n          \"name\": \"Prepare Tracker Update Data\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            1936,\n            224\n          ]\n        },\n        {\n          \"parameters\": {\n            \"method\": \"POST\",\n            \"url\": \"https://api.openai.com/v1/chat/completions\",\n            \"authentication\": \"predefinedCredentialType\",\n            \"nodeCredentialType\": \"openAiApi\",\n            \"sendBody\": true,\n            \"bodyParameters\": {\n              \"parameters\": [\n                {\n                  \"name\": \"model\",\n                  \"value\": \"gpt-4-turbo\"\n                },\n                {\n                  \"name\": \"messages\",\n                  \"value\": \"={{ [{\\\"role\\\": \\\"user\\\", \\\"content\\\": $json.classificationPrompt}] }}\"\n                },\n                {\n                  \"name\": \"response_format\",\n                  \"value\": \"={{ {\\\"type\\\": \\\"json_object\\\"} }}\"\n                }\n              ]\n            },\n            \"options\": {}\n          },\n          \"id\": \"http-openai-1\",\n          \"name\": \"Classify Document with GPT-4\",\n          \"type\": \"n8n-nodes-base.httpRequest\",\n          \"typeVersion\": 4.2,\n          \"position\": [\n            688,\n            320\n          ],\n          \"credentials\": {\n            \"openAiApi\": {\n              \"id\": \"xmJ7t6kaKgMwA1ce\",\n              \"name\": \"OpenAi account\"\n            }\n          }\n        },\n        {\n          \"id\": \"3732e080-c0d3-4763-957d-d4d90761ddd8\",\n          \"name\": \"Tier 2 GPT-4 API Call\",\n          \"type\": \"n8n-nodes-base.httpRequest\",\n          \"typeVersion\": 4.2,\n          \"position\": [\n            1264,\n            320\n          ],\n          \"parameters\": {\n            \"method\": \"POST\",\n            \"url\": \"https://api.openai.com/v1/chat/completions\",\n            \"authentication\": \"predefinedCredentialType\",\n            \"nodeCredentialType\": \"openAiApi\",\n            \"sendBody\": true,\n            \"specifyBody\": \"json\",\n            \"jsonBody\": \"={\\n  \\\"model\\\": \\\"gpt-4\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": {{ $json.tier2Prompt }}\\n    }\\n  ],\\n  \\\"temperature\\\": 0.3,\\n  \\\"max_tokens\\\": 300\\n}\",\n            \"options\": {}\n          }\n        },\n        {\n          \"id\": \"86d8d160-de91-464d-92d0-7db05b7c3f4f\",\n          \"name\": \"Parse Tier 2 Result\",\n          \"type\": \"n8n-nodes-base.code\",\n          \"typeVersion\": 2,\n          \"position\": [\n            1488,\n            320\n          ],\n          \"parameters\": {\n            \"jsCode\": \"// Parse Tier 2 Classification Result\\n\\nconst response = $input.first().json;\\n\\n// Extract Tier 2 classification from GPT-4 response\\nlet tier2Result;\\ntry {\\n  const content = response.choices[0].message.content;\\n  tier2Result = JSON.parse(content);\\n} catch (error) {\\n  // Parsing failed - route to LOW_CONFIDENCE\\n  return {\\n    json: {\\n      error: 'Failed to parse Tier 2 classification',\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier2_parse_error',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\nconst {\\n  documentType,\\n  tier2Confidence,\\n  germanName,\\n  englishName,\\n  isCoreType,\\n  reasoning: tier2Reasoning\\n} = tier2Result;\\n\\n// THRESHOLD CHECK: Tier 2 confidence must be >= 70%\\nif (tier2Confidence < 70) {\\n  return {\\n    json: {\\n      documentType,\\n      tier2Confidence,\\n      lowConfidence: true,\\n      confidenceFailureStage: 'tier2',\\n      ...($input.first().json)\\n    }\\n  };\\n}\\n\\n// Calculate combined confidence\\nconst tier1Confidence = $input.first().json.tier1Confidence;\\nconst combinedConfidence = Math.round((tier1Confidence + tier2Confidence) / 2);\\n\\nreturn {\\n  json: {\\n    // Classification results\\n    documentType,\\n    tier2Confidence,\\n    combinedConfidence,\\n    germanName,\\n    englishName,\\n    isCoreType,\\n    tier2Reasoning,\\n    // Pass through Tier 1 data\\n    tier1Category: $input.first().json.tier1Category,\\n    tier1Confidence: $input.first().json.tier1Confidence,\\n    tier1Reasoning: $input.first().json.tier1Reasoning,\\n    // Pass through original data\\n    ...($input.first().json)\\n  }\\n};\"\n          }\n        }\n      ],\n      \"connections\": {\n        \"Execute Workflow Trigger (Refreshed)\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Build AI Classification Prompt\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Parse Classification Result\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Tier 2 GPT-4 API Call\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Lookup Client in Client_Tracker\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Find Client Row and Validate\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Find Client Row and Validate\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Check Status\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Check Status\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Lookup 38_Unknowns Folder\",\n                \"type\": \"main\",\n                \"index\": 0\n              },\n              {\n                \"node\": \"Prepare Tracker Update Data\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Update Client_Tracker Row\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Lookup Client in AMA_Folder_IDs\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Lookup Client in AMA_Folder_IDs\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Get Destination Folder ID\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Get Destination Folder ID\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Move File to Final Location\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Move File to Final Location\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Prepare Success Output\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Lookup 38_Unknowns Folder\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Get 38_Unknowns Folder ID\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Get 38_Unknowns Folder ID\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Move File to 38_Unknowns\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Move File to 38_Unknowns\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Prepare Error Email Body\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Prepare Error Email Body\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Send Error Notification Email\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Prepare Tracker Update Data\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Update Client_Tracker Row\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Build AI Classification Prompt\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Classify Document with GPT-4\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Classify Document with GPT-4\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Parse Classification Result\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Tier 2 GPT-4 API Call\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Parse Tier 2 Result\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        },\n        \"Parse Tier 2 Result\": {\n          \"main\": [\n            [\n              {\n                \"node\": \"Lookup Client in Client_Tracker\",\n                \"type\": \"main\",\n                \"index\": 0\n              }\n            ]\n          ]\n        }\n      },\n      \"authors\": \"Sway Clarke\",\n      \"name\": null,\n      \"description\": null,\n      \"autosaved\": false,\n      \"workflowPublishHistory\": [\n        {\n          \"createdAt\": \"2026-01-12T23:13:07.057Z\",\n          \"id\": 718,\n          \"workflowId\": \"okg8wTqLtPUwjQ18\",\n          \"versionId\": \"7e4e2fa3-2285-4b63-ba78-4b828f1f577c\",\n          \"event\": \"activated\",\n          \"userId\": \"e9bd9112-c2e3-4f67-873a-e1001baeafd8\"\n        }\n      ]\n    }\n  }\n}"
  }
]